%YAML 1.1
---
$schema: "http://stsci.edu/schemas/yaml-schema/draft-01"
id: "http://stsci.edu/schemas/asdf/transform/lookup_table-1.0.0"
tag: "tag:stsci.edu:asdf/transform/lookup_table-1.0.0"
title: >
  LookupTable interpolation on a regular grid.
description: |
  The table must be defined on a regular grid, however, the spacing may be uneven.
  Three interpolation methods are supported: linear, splinef2d, nearest.

  If `bounds_error` is True an error is raised for inputs outside the domain.
  If `bounds_error` is False, `fill_value` determines the value for points outside the
  domain of the lookup table.
  If `fill_value` is None and `bounds_error` is False points outside the domain are extrapolated.

examples:
  -
    - A LookupTable model in 2 dimensions, performing linear interpolation with extrapolation
    - |
        !transform/lookup_table-1.0.0
          bounds_error: false
          lookup_table: !core/ndarray-1.0.0
            data:
              - [3.0, 2.56, 1.23]
              - [0.902, 2.0, -0.2]
              - [8.2, 3.2, 5.4]
            datatype: float64
            shape: [3, 3]
            points:
              - [1, 2, 3]
              - [1, 2, 3]
  -
    - A LookupTable model in 1 dimensions, performing nearest interpolation
    - |
        !transform/lookup_table-1.0.0
          fill_value: .nan
          lookup_table: !core/ndarray-1.0.0
            data: [12.25, 9.0, 6.25, 4.0, 2.25]
            datatype: float64
            shape: [5]
          method: nearest
          points:
            - !core/ndarray-1.0.0
              data: [0, 1, 2, 3, 4]
              datatype: int64
              shape: [5]

allOf:
  - $ref: "transform-1.0.0"
  - type: object
    properties:
      lookup_table:
        anyOf:
          - $ref: "../core/ndarray-1.0.0"
          - type: array
        description: |
          Array or ndarray representing the data on a regular grid.
          The dimensionality of the array determines the dimensionality
          of the grid and the number of inputs.
      points:
        description: |
          Array of N ndarrays or arrays.
          Points defining a regular grid in N dimensions, where N is
          equal to the dimensionality of `lookup_table`.
        type: array
        items:
          anyOf:
            - $ref: "../core/ndarray-1.0.0"
            - type: array
              items:
                type: number
      bounds_error:
        description: |
          A flag indicating whether an error should be raised
          if the requested interpolated values are outside
          the domain of the inputs data.
        type: boolean
        default: true
      fill_value:
        description: |
          The value to use for points outside the interpolation domain.
          If null, values are extrapolated.
        anyOf:
          - type: number
          - type: null
      method:
        description: |
          The method of interpolation. Options are:
          linear, nearest and splinef2d.
          splinef2d is supported only for 2-dimensional data.
        type: string
        enum: [linear, nearest, splinef2d]
        default: linear
    required: [lookup_table]